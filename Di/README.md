# DI 容器核心功能
1. 组件构造
2. 依赖的选择
3. 生命周期

# TDD 流程！ 
## 1、先将需求分解为功能点：即组件构造、依赖的选择、生命周期
## 2、不存在架构愿景，将功能点作为功能上下文
## 3、将功能点按照功能上下文，分解为任务项
### 3.1 组件构造
- 注册的组件不可实例化——抛出异常
  - 抽象类
  - 接口
- 构造方法注入
  - 如果依赖的组件存在，通过 Inject 标注的构造方法生成组件实例；
  - 如果所依赖的组件也依赖其他组件，需要对所依赖的组件完成依赖注入；
  - 如果所依赖的组件不存在，抛出异常；
  - 如果组件间存在循环依赖，抛出异常；
- 字段注入
  - 如果依赖的组件存在，通过 Inject 标注的字段生成组件实例；
  - 如果所依赖的组件也依赖其他组件，需要对所依赖的组件完成依赖注入；
  - 如果所依赖的组件不存在，抛出异常；
  - 如果组件间存在循环依赖，抛出异常；
- 方法注入
  - 如果依赖的组件存在，通过 Inject 标注的方法生成组件实例；
  - 如果所依赖的组件也依赖其他组件，需要对所依赖的组件完成依赖注入；
  - 如果所依赖的组件不存在，抛出异常；
  - 如果组件间存在循环依赖，抛出异常；

### 3.2 依赖选择
- 自定义 Qualifier 的依赖
  - 提供默认 Qualifier —— Named

### 3.3 生命周期
- @Singleton
  - 当依赖的组件打了 @Singleton 标记，在容器上下文内提供唯一的实例